{% extends "base.html" %}

{% block content %}

<div class="container">
    <form method="post" action="/">
        <div class="form-group">
            <label for="date_from">Date from:</label>
            <div class="input-group date" id="datetimepicker7" data-target-input="nearest">
                <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker7"
                       id="date_from" name="date_from" required/>
                <div class="input-group-append" data-target="#datetimepicker7" data-toggle="datetimepicker">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="date_to">Date to:</label>
            <div class="input-group date" id="datetimepicker8" data-target-input="nearest">
                <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker8" id="date_to"
                       name="date_to" required/>
                <div class="input-group-append" data-target="#datetimepicker8" data-toggle="datetimepicker">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="sort" name="sort">
            <label class="form-check-label" for="sort">Sort by date</label>
        </div>
        <br>
        <div class='text-center'>
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    <script type="text/javascript">
        $(function () {
            $('#datetimepicker7').datetimepicker({
                format: 'YYYY-MM-DD HH:mm:ss',
                default: '2023-06-01 00:00:00',
                icons: {
                    time: "fa fa-clock",
                    date: "fa fa-calendar",
                    up: "fa fa-arrow-up",
                    down: "fa fa-arrow-down"
                },
            });
            $('#datetimepicker8').datetimepicker({
                useCurrent: false,
                format: 'YYYY-MM-DD HH:mm:ss',
                default: '2023-08-01 00:00:00',
                icons: {
                    time: "fa fa-clock",
                    date: "fa fa-calendar",
                    up: "fa fa-arrow-up",
                    down: "fa fa-arrow-down"
                },
            });
            $("#datetimepicker7").on("change.datetimepicker", function (e) {
                $('#datetimepicker8').datetimepicker('minDate', e.date);
            });
            $("#datetimepicker8").on("change.datetimepicker", function (e) {
                $('#datetimepicker7').datetimepicker('maxDate', e.date);
            });
        });
    </script>
    <br>
</div>
<p>{{ error }}</p>
<div class="container">
    <div class="row">
        {% for item in data %}
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">{{ item["number"] }}</h5>
                    <p class="card-text">{{ item["date"] }}</p>
                    <p class="card-text">{{ item["partner_name"] }}</p>
                    <p class="card-text">{{ item["amount_total"] }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock content %}
